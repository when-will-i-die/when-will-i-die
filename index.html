<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg" />
  <meta name="viewport" content="width=device-width" />
  <meta name="generator" content={Astro.generator} />
  <title>When will I die?</title>
</head>

<body>
  <form id="form">
    <label>
      what's year you born?:<br />
      <input type="number" name="user-birthdate" id="user-birthdate" placeholder="yyyy" required />
      <br />
      <br />
      <label>
        What's your life expectancy?<br />
        <input type="number" name="user-expectancy" id="user-expectancy" placeholder="Years old" required />
      </label>
      <button onClick="setLocalStorage()">Submit</button> </label>
  </form>

  <div class="userData"></div>

  <div class="task" contenteditable="true">
    What is your main focus for today?
  </div>

</body>

<style>
  :root {
    --rp-base: hsl(249deg, 22%, 12%);
    --rp-surface: hsl(247deg, 23%, 15%);
    --rp-overlay: hsl(248deg, 25%, 18%);
    --rp-muted: hsl(249deg, 12%, 47%);
    --rp-subtle: hsl(248deg, 15%, 61%);
    --rp-text: hsl(245deg, 50%, 91%);
    --rp-love: hsl(343deg, 76%, 68%);
    --rp-gold: hsl(35deg, 88%, 72%);
    --rp-rose: hsl(2deg, 55%, 83%);
    --rp-pine: hsl(197deg, 49%, 38%);
    --rp-foam: hsl(189deg, 43%, 73%);
    --rp-iris: hsl(267deg, 57%, 78%);
    --rp-highlight-low: hsl(244deg, 18%, 15%);
    --rp-highlight-med: hsl(249deg, 15%, 28%);
    --rp-highlight-high: hsl(248deg, 13%, 36%);

    --rp-moon-base: hsl(246deg, 24%, 17%);
    --rp-moon-surface: hsl(248deg, 24%, 20%);
    --rp-moon-overlay: hsl(248deg, 21%, 26%);
    --rp-moon-muted: hsl(249deg, 12%, 47%);
    --rp-moon-subtle: hsl(248deg, 15%, 61%);
    --rp-moon-text: hsl(245deg, 50%, 91%);
    --rp-moon-love: hsl(343deg, 76%, 68%);
    --rp-moon-gold: hsl(35deg, 88%, 72%);
    --rp-moon-rose: hsl(2deg, 66%, 75%);
    --rp-moon-pine: hsl(197deg, 48%, 47%);
    --rp-moon-foam: hsl(189deg, 43%, 73%);
    --rp-moon-iris: hsl(267deg, 57%, 78%);
    --rp-moon-highlight-low: hsl(245deg, 22%, 20%);
    --rp-moon-highlight-med: hsl(247deg, 16%, 30%);
    --rp-moon-highlight-high: hsl(249deg, 15%, 38%);

    --rp-dawn-base: hsl(32deg, 57%, 95%);
    --rp-dawn-surface: hsl(35deg, 100%, 98%);
    --rp-dawn-overlay: hsl(33deg, 43%, 91%);
    --rp-dawn-muted: hsl(257deg, 9%, 61%);
    --rp-dawn-subtle: hsl(248deg, 12%, 52%);
    --rp-dawn-text: hsl(248deg, 19%, 40%);
    --rp-dawn-love: hsl(343deg, 35%, 55%);
    --rp-dawn-gold: hsl(35deg, 81%, 56%);
    --rp-dawn-rose: hsl(3deg, 53%, 67%);
    --rp-dawn-pine: hsl(197deg, 53%, 34%);
    --rp-dawn-foam: hsl(189deg, 30%, 48%);
    --rp-dawn-iris: hsl(268deg, 21%, 57%);
    --rp-dawn-highlight-low: hsl(25deg, 35%, 93%);
    --rp-dawn-highlight-med: hsl(10deg, 9%, 86%);
    --rp-dawn-highlight-high: hsl(315deg, 4%, 80%);
  }

  body {
    background-color: var(--rp-dawn-base);
  }

  .userData {
    color: var(--rp-dawn-rose);
    font-weight: bold;
    font-size: 2rem;
  }

  .task {
    font-size: 3rem;
    color: var(--rp-dawn-foam);
    font-weight: bold;
  }
</style>

<script>
  function setLocalStorage() {
    localStorage.setItem("userBirthdate", `${document.getElementById("user-birthdate").value}`);
    localStorage.setItem("userExpectancy", `${document.getElementById("user-expectancy").value}`);
  }

  const userBirthday = localStorage.getItem("userBirthdate");
  const userExpectancy = localStorage.getItem("userExpectancy");

  if (userBirthday !== null) {
    document.getElementById("form").style.display = "none";

    const now = new Date();
    const yearLeft = userExpectancy - (now.getFullYear() - userBirthday);

    document.querySelector('.userData').innerHTML = `${yearLeft} years left`;
  }

</script>

</html>
